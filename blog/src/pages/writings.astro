---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import ArticleCard from '../components/ArticleCard.astro';
import Footer from '../components/Footer.astro';

const tutorialPosts = await getCollection('blog', ({ data }) => {
  return data.category === 'writings' && !data.draft;
});

const sortedWritings = tutorialPosts.sort((a, b) => 
  new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
);
---

<BaseLayout title="Writings">
  <Header />
  
  <main>
    <section class="page-header">
      <div class="container">
        <h1>
          <svg class="button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="80" height="80" fill="currentColor">
                  <path d="M21 6h-8l-2-2H3v16h18V6zm-2 12H5V8h14v10z"/>
          </svg>
        </h1>
        <p><i>“Writing code is like writing a novel except the plot holes are called bugs, and the critics are your compiler.”</i></p>
      </div>
    </section>

    <section class="posts-grid-section">
      <div class="container">
        <div class="articles-grid">
          {sortedWritings.map((post) => (
            <ArticleCard
              title={post.data.title}
              excerpt={post.data.description}
              tags={post.data.tags}
              slug={post.slug}
            />
          ))}
        </div>
      </div>
    </section>
  </main>

  <Footer />
</BaseLayout>

<style>
  .page-header {
    padding: 80px 0 60px;
    text-align: center;
    background-color: var(--card-bg-color);
  }

  .page-header h1 {
    font-size: 300rem;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
  }

  .page-header p {
    font-size: 1.2rem;
    max-width: 600px;
    margin: 0 auto;
    color: var(--text-color);
    font-style: italic;
  }

  .posts-grid-section {
    padding: 80px 0;
  }

  .articles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 30px;
  }

  @media (max-width: 768px) {
    .page-header h1 {
      font-size: 2.5rem;
      flex-direction: column;
      gap: 10px;
    }
  }
</style>


