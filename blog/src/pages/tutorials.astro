---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import ArticleCard from '../components/ArticleCard.astro';
import Footer from '../components/Footer.astro';

const tutorialPosts = await getCollection('blog', ({ data }) => {
  return data.category === 'tutorials' && !data.draft;
});

const sortedTutorials = tutorialPosts.sort((a, b) => 
  new Date(b.data.publishedAt).getTime() - new Date(a.data.publishedAt).getTime()
);
---

<BaseLayout title="Tutorials">
  <Header />
  
  <main>
    <section class="page-header">
      <div class="container">
        <h1>ðŸ“š Tutorials</h1>
        <p>Step-by-step guides and technical deep-dives to help you master new skills and technologies.</p>
      </div>
    </section>

    <section class="posts-grid-section">
      <div class="container">
        <div class="articles-grid">
          {sortedTutorials.map((post) => (
            <ArticleCard
              title={post.data.title}
              excerpt={post.data.description}
              tags={post.data.tags}
              slug={post.slug}
            />
          ))}
        </div>
      </div>
    </section>
  </main>

  <Footer />
</BaseLayout>

<style>
  .page-header {
    padding: 80px 0 60px;
    text-align: center;
    background-color: var(--card-bg-color);
  }

  .page-header h1 {
    font-size: 3rem;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
  }

  .page-header p {
    font-size: 1.2rem;
    max-width: 600px;
    margin: 0 auto;
    color: var(--text-color);
    font-style: italic;
  }

  .posts-grid-section {
    padding: 80px 0;
  }

  .articles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 30px;
  }

  @media (max-width: 768px) {
    .page-header h1 {
      font-size: 2.5rem;
      flex-direction: column;
      gap: 10px;
    }
  }
</style>


