---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import ArticleCard from '../components/ArticleCard.astro';
import Footer from '../components/Footer.astro';

const tutorialPosts = await getCollection('blog', ({ data }) => {
  return data.category === 'tutorials' && !data.draft;
});

const sortedTutorials = tutorialPosts.sort((a, b) => 
  new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
);
---

<BaseLayout title="Tutorials">
  <Header />
  
  <main>
    <section class="page-header">
      <div class="container">
        <h2 class="tutorials-heading">Tutorials</h2>
        <h1>
          <svg class="button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="100" height="100" fill="currentColor">
                  <path d="M12 2L3 7v13h18V7L12 2zm0 2.3l6 3.6v1.1l-6-3.6-6 3.6V7.9l6-3.6zm-6 6.7l6 3.6 6-3.6v7.4H6v-7.4z"/>
          </svg>
        </h1>
        <p>Embark on a journey where semicolons are sacred, bugs are rites of passage, and every crash is just the universe's way of saying, 'You're getting warmer.'</p>
      </div>
    </section>

    <section class="posts-grid-section">
      <div class="container">
        <div class="articles-grid">
          {sortedTutorials.map((post) => (
            <ArticleCard
              title={post.data.title}
              excerpt={post.data.description}
              tags={post.data.tags}
              slug={post.id}
            />
          ))}
        </div>
      </div>
    </section>
  </main>

  <Footer />
</BaseLayout>

<style>
  .tutorials-heading {
    font-size: 3rem;
    margin-bottom: 20px;
    color: var(--heading-color);
  }
  .page-header {
    padding: 80px 0 60px;
    text-align: center;
    background-color: var(--card-bg-color);
  }

  .page-header h1 {
    font-size: 300rem;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
  }

  .page-header p {
    font-size: 1.2rem;
    max-width: 600px;
    margin: 0 auto;
    color: var(--text-color);
    font-style: italic;
  }

  .posts-grid-section {
    padding: 80px 0;
  }

  .articles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 30px;
  }

  @media (max-width: 768px) {
    .page-header h1 {
      font-size: 2.5rem;
      flex-direction: column;
      gap: 10px;
    }
  }
</style>


